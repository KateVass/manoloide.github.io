<html>
	<head>
		<title>Prueba 1</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="../../three.min.js"></script>
		<script src="OrbitControls.js"></script>
		<script>
			var scene = new THREE.Scene();
			scene.fog = new THREE.FogExp2(0x1A141D, 0.3);

			var renderer = new THREE.WebGLRenderer({ antialias: true });
			renderer.setClearColor( scene.fog.color );
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.shadowMapEnabled = true;
			document.body.appendChild( renderer.domElement );
 
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
			camera.position.z = 3;

			var controls;
			controls = new THREE.OrbitControls( camera );
			controls.update();


			var spotLight = new THREE.SpotLight(0xffffff);
			spotLight.position.set(10, 20, 20);
			spotLight.castShadow = true;
			scene.add(spotLight);
			var light = new THREE.AmbientLight(0x111111);
			scene.add( light );

			var cubes = new Array();
			for(var i = 0; i < 100; i++){
				var dis = Math.random()*2;
				var t = 0.1/Math.max(Math.pow(dis,3), 1);
				var cubeGeometry = new THREE.BoxGeometry(t, t, t);
				var cubeMaterial = new THREE.MeshLambertMaterial({color:  0xffffff});
				var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
				var a1 = Math.random()*2*Math.PI;
				var a2 = Math.random()*2*Math.PI;
				cube.position.x = Math.cos(a1)*Math.sin(a2)*dis;
				cube.position.y = Math.sin(a1)*Math.sin(a2)*dis;
				cube.position.z = Math.cos(a2)*dis;
				cube.rotation.x = Math.random()*2*Math.PI;
				cube.rotation.y = Math.random()*2*Math.PI;
				cube.rotation.z = Math.random()*2*Math.PI;
				cube.castShadow = true;
				scene.add(cube);
			}

			var render = function () {
				requestAnimationFrame( render );
				renderer.render(scene, camera);
			};

			render();

			window.addEventListener( 'resize', onWindowResize, false );
			function onWindowResize(){
			    camera.aspect = window.innerWidth / window.innerHeight;
			    camera.updateProjectionMatrix();
			    renderer.setSize( window.innerWidth, window.innerHeight );
			}

		</script>
	</body>
</html>